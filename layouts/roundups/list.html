{{ define "head" }}
  <script src="{{ "js/category-search.js" | relURL }}" defer></script>
{{ end }}

{{ define "main" }}
  <section class="content">
    <h1>{{ .Title }}</h1>
    {{ .Content }}

    <!-- Search (Roundups only) -->
    <div class="search-wrap" role="search" aria-label="Search categories">
      <input
        id="categorySearch"
        type="search"
        inputmode="search"
        autocomplete="off"
        placeholder="Search categoriesâ€¦"
        aria-label="Search categories" />
      <button id="clearSearch" class="clear-btn" type="button" aria-label="Clear search">Clear</button>
      <div id="searchCount" class="search-count" aria-live="polite"></div>
    </div>

    <!-- Category cards -->
    <div id="catGrid" class="roundups-grid">
      {{ range sort .Pages "Title" }}
        {{ $title := cond (isset .Params "display_title") .Params.display_title .Title }}
        <a class="roundups-card" href="{{ .RelPermalink }}" data-cat="{{ $title | plainify }}" aria-label="{{ $title }}">
          <h3>{{ $title }}</h3>
          {{ with .Params.breadcrumb_title }}
            <p>{{ . }}</p>
          {{ else }}
            {{ with .Params.category }}<p>{{ . }}</p>{{ end }}
          {{ end }}
        </a>
      {{ end }}
    </div>

    <div id="noResults" class="no-results" hidden>No categories found.</div>
  </section>
{{ end }}
